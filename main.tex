% !TeX program = xelatex
% !TeX encoding = UTF-8

\documentclass[11pt,a4paper,twoside]{book}

%----------------------------------------------------------------------------------------
%	TEMEL PAKETLER VE AYARLAR
%----------------------------------------------------------------------------------------

% Sayfa düzeni
\usepackage[top=1.5cm, bottom=1.5cm, left=1.2cm, right=1.2cm, includeheadfoot]{geometry}
\usepackage{graphicx}
\usepackage{float}
\usepackage{xcolor}

% Türkçe dil desteği
\usepackage{fontspec}
\usepackage{polyglossia}
\setdefaultlanguage{turkish}

% Font ayarları
\setmainfont{TeX Gyre Termes}[
  Extension = .otf,
  UprightFont = *-Regular,
  BoldFont = *-Bold,
  ItalicFont = *-Italic,
  BoldItalicFont = *-BoldItalic,
  Ligatures=TeX,
  WordSpace=1.1,
  PunctuationSpace=2,
  Kerning=On
]
\setsansfont{TeX Gyre Heros}
\setmonofont{Inconsolata}

% Mikro tipografi ayarları
\usepackage{microtype}
\LoadMicrotypeFile{xetex}

% Sayfa düzeni toleransları
\tolerance=10000
\emergencystretch=3em
\hyphenpenalty=50
\exhyphenpenalty=50
\doublehyphendemerits=1000
\finalhyphendemerits=1000
\brokenpenalty=0
\pretolerance=100
\binoppenalty=700
\relpenalty=500
\clubpenalty=10000
\widowpenalty=10000
\displaywidowpenalty=50
\predisplaypenalty=10000
\postdisplaypenalty=1000
\floatingpenalty=20000
\raggedbottom
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}

%----------------------------------------------------------------------------------------
%	MATEMATİK VE TABLO PAKETLERİ
%----------------------------------------------------------------------------------------

\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{array}
\usepackage{booktabs}
\usepackage{adjustbox}

% Tablo ayarları
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{1.2}
% Tablolar için ek ayarlar
\setlength{\LTpre}{0pt}
\setlength{\LTpost}{0pt}
\setlength{\LTleft}{0pt}
\setlength{\LTright}{0pt}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}}

%----------------------------------------------------------------------------------------
%	KOD BLOKLARI VE LİSTELEME AYARLARI
%----------------------------------------------------------------------------------------

\usepackage{listings}
\usepackage{fancyvrb}

\lstset{
    breaklines=true,
    breakatwhitespace=true,
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\tiny,
    numbersep=5pt,
    frame=single,
    showstringspaces=false,
    tabsize=4,
    captionpos=b,
    backgroundcolor=\color{white},
    keywordstyle=\color{blue},
    commentstyle=\color{green!60!black},
    stringstyle=\color{red}
}

% Verbatim ayarları
\fvset{fontsize=\small,xleftmargin=0.5cm,xrightmargin=0.5cm}

%----------------------------------------------------------------------------------------
%	BAŞLIK VE İÇERİK FORMATLAMA
%----------------------------------------------------------------------------------------

\usepackage{titlesec}
\titleformat{\chapter}[display]
    {\normalfont\huge\bfseries}
    {\filcenter\chaptertitlename\ \thechapter}
    {20pt}
    {\Huge\bfseries\filcenter}

% Uzun kelime ve URL'lerin otomatik bölünmesi
\usepackage{seqsplit}
\usepackage{ragged2e}
\usepackage{array}

% Tablo hücrelerinde uzun kelimeleri heceleme
\newcolumntype{P}[1]{>{\RaggedRight\hspace{0pt}}p{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}

% Tablo ayarları
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{1.2}
\setlength{\extrarowheight}{2pt}

% Font size tanımları
% Font ayarları
\renewcommand{\footnotesize}{\small}

% Metin düzeni iyileştirmeleri
\tolerance=3000
\emergencystretch=15pt
\hbadness=10000
\hfuzz=5pt
\vfuzz=5pt

% Sayfa başlıkları ve numaraları için
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\leftmark}
\fancyhead[LO]{\rightmark}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\headheight}{29.06204pt}
\addtolength{\topmargin}{-14.06204pt}

% Şekil ve tablo başlıkları için
\usepackage[labelfont=bf]{caption}
\usepackage{subcaption}

% Bağlantılar için hyperref (en son yüklenmeli)
\usepackage{microtype}
\usepackage[xetex,unicode,bookmarksnumbered,breaklinks,colorlinks=false]{hyperref}

% Gelişmiş mikro-tipografi ayarları
\microtypesetup{
  protrusion=true,
  expansion=true,
  tracking=true,
  spacing=true,
  kerning=true,
  factor=1100,
  stretch=10,
  shrink=10
}
\usepackage{bookmark}
\hypersetup{
    pdfencoding=unicode,
    hidelinks,
    pdftitle={Kapsamlı Siber Güvenlik El Kitabı},
    pdfauthor={Yusuf Talha ARABACI},
    pdflang={tr},
    bookmarksopen=true,
    bookmarksopenlevel=2
}
\pdfstringdefDisableCommands{%
  \def\textit#1{#1}%
  \def\textbf#1{#1}%
}

%----------------------------------------------------------------------------------------
%	KİTAP BİLGİSİ
%----------------------------------------------------------------------------------------
\newcommand{\KitapBaslik}{Kapsamlı Siber Güvenlik El Kitabı}
\newcommand{\KitapAltBaslik}{Teori, Uygulama ve En İyi Pratikler}
\newcommand{\YazarAdi}{Yusuf Talha ARABACI}

\begin{document}

% --- Kapak ---
\begin{titlepage}
  \centering
  \vspace*{3cm}
  {\Huge\bfseries \KitapBaslik \par}
  \vspace{0.5cm}
  {\Large \KitapAltBaslik \par}
  \vfill
  {\Large \YazarAdi \par}
  \vspace{1cm}
  {\large \today \par}
\end{titlepage}

\frontmatter
\tableofcontents

\mainmatter

% --- Bölümler (her biri ayrı .tex dosyası) ---
\include{data/1}
\include{data/2}
\include{data/3}
\include{data/4}
\include{data/5}
\include{data/6}
\include{data/7}
\include{data/8}
\include{data/9}
\include{data/10}
\include{data/11}
\include{data/12}
\include{data/13}
\include{data/14}

\backmatter

\end{document}
